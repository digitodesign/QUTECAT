{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  },
  "environments": {
    "production": {
      "variables": {
        "APP_ENV": "production",
        "APP_DEBUG": "false",
        "APP_KEY": "${RAILWAY_STATIC_URL}",
        "DB_CONNECTION": "pgsql",
        "CACHE_DRIVER": "redis",
        "QUEUE_CONNECTION": "redis",
        "SESSION_DRIVER": "redis",
        "FILESYSTEM_DISK": "r2",
        "R2_ACCESS_KEY_ID": "${R2_ACCESS_KEY_ID}",
        "R2_SECRET_ACCESS_KEY": "${R2_SECRET_ACCESS_KEY}",
        "R2_BUCKET": "${R2_BUCKET}",
        "R2_PRIVATE_BUCKET": "${R2_PRIVATE_BUCKET}",
        "R2_ENDPOINT": "${R2_ENDPOINT}",
        "R2_PUBLIC_URL": "${R2_PUBLIC_URL}",
        "PUSHER_APP_KEY": "${PUSHER_APP_KEY}",
        "PUSHER_APP_SECRET": "${PUSHER_APP_SECRET}",
        "STRIPE_KEY": "${STRIPE_KEY}",
        "STRIPE_SECRET": "${STRIPE_SECRET}",
        "STRIPE_WEBHOOK_SECRET": "${STRIPE_WEBHOOK_SECRET}",
        "FIREBASE_CREDENTIALS": "${FIREBASE_CREDENTIALS}",
        "MAIL_MAILER": "smtp",
        "MAIL_HOST": "${MAIL_HOST}",
        "MAIL_PORT": "${MAIL_PORT}",
        "MAIL_USERNAME": "${MAIL_USERNAME}",
        "MAIL_PASSWORD": "${MAIL_PASSWORD}"
      }
    }
  }
}
