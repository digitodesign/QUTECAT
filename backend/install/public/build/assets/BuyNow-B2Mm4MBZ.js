import{G as R,y as E,v as A,u as U,n as z,H as Q,d as w,j as q,p as O,c as u,o as i,a as e,l as $,b as y,t,g as a,F as G,r as H,h as W,C as D,D as X,q as T,m as Z,f as ee,aa as te,ab as se,a1 as oe,e as ae,w as F,ac as ne,a0 as I,T as le}from"./app-BOS7Q6xY.js";import{_ as re}from"./OrderConfirmModal-CTBlwlat.js";import{_ as ie}from"./VerifyOtpModal-BP2K4OQS.js";import{r as de}from"./TrashIcon-DXYSYseG.js";import{_ as ce}from"./CheckoutShippingAddress-BWQj0k_r.js";import{r as ue}from"./HomeIcon-BZZhQTAF.js";import"./AddressForm-CE6nGvHX.js";import"./AddressFormModal-UCPT_3Wt.js";const me={class:"p-6 bg-white rounded-2xl border border-slate-200"},pe={class:"text-slate-950 text-xl font-medium leading-7"},he={class:"my-4 flex justify-between gap-4"},_e={class:"text-slate-950 text-base font-normal leading-normal"},ve={class:"text-slate-950 text-base font-normal leading-normal"},fe={class:"my-4 flex justify-between gap-4"},ye={class:"text-red-500 text-base font-normal leading-normal"},be={class:"text-slate-950 text-base font-normal leading-normal"},ge={class:"my-4 flex justify-between gap-4"},xe={class:"text-slate-950 text-base font-normal leading-normal"},we={class:"text-slate-950 text-base font-normal leading-normal"},$e={class:"my-4 flex justify-between gap-4"},ke={class:"text-slate-950 text-base font-normal leading-normal"},Ce={class:"text-slate-950 text-base font-normal leading-normal"},Pe={key:0,class:"p-3 bg-slate-100 text-black rounded-lg mb-2"},De={class:"text-sm sm:text-base font-medium mb-2"},Ne={class:"space-y-2"},Me={class:"font-medium"},Se={class:"font-medium"},je={class:"mt-4 p-3 bg-slate-200 rounded-lg"},Be={class:"text-sm sm:text-base font-medium"},Ve={class:"text-base font-bold"},Ie={class:"my-4 flex justify-between gap-4"},Oe={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Te={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Ae={class:"p-4 mt-6 bg-slate-100 rounded-xl"},Ue={class:"text-black text-base font-normal leading-normal"},ze={class:"relative mt-2"},Ge=["placeholder"],He={class:"absolute top-1/2 -translate-y-1/2 left-3"},Le={key:0,class:"p-4 bg-white rounded-xl border border-slate-200 flex items-center justify-between mt-3"},We={class:"animated-text"},Fe={key:2,class:"px-6 py-4 w-full mt-4 bg-primary-200 rounded-[10px] text-primary text-base font-semibold flex items-center justify-center gap-2",disabled:""},Re={__name:"BuyNowCheckoutOrderSummary",props:{note:String,paymentMethod:String,isDigitalProduct:Boolean},setup(B){const k=new E,n=A(),l=U(),g=z(),d=Q(),f=w(!1),s=w(""),h=w(!1),v=B,r=w({total_amount:0,delivery_charge:0,coupon_discount:0,payable_amount:0,order_tax_amount:0});q(()=>{s.value=n.coupon_code,n.isLoadingCart||_()}),O(()=>n.isLoadingCart,()=>{n.isLoadingCart||_()});const _=()=>{axios.post("/cart/checkout",{shop_ids:[n.buyNowShopId],is_buy_now:!0,coupon_code:s.value},{headers:{Authorization:g.token}}).then(o=>{r.value=o.data.data.checkout,n.buyNowProduct=o.data.data.checkout_items[0],f.value=o.data.data.apply_coupon,f.value&&s.value.length>0?(d.success(o.data.message,{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),n.coupon_code=s.value):!f.value&&s.value.length>0&&(d.error(o.data.message,{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),n.coupon_code="")}).catch(o=>{d.error(o.response.data.message,{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"})})},c=()=>{s.value.length>0&&_()},V=()=>{s.value="",f.value=!1,n.coupon_code="",_()},N={component:oe,props:{title:"Order Placed",message:"Your order has been placed successfully."}},C=w(!1),M=()=>{if(!n.address){d.error("Please select shipping address");return}if(v.isDigitalProduct==!0&&v.paymentMethod=="cash"){d.error("Please select payment method",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"});return}if(v.paymentMethod==null||v.paymentMethod=="card"){d.error("Please select payment option",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"});return}n.buyNowProduct?(C.value=!0,axios.post("/place-order",{shop_ids:[n.buyNowShopId],address_id:n.address.id,payment_method:v.paymentMethod,coupon_code:s.value,note:v.note,is_buy_now:!0},{headers:{Authorization:g.token}}).then(o=>{C.value=!1,d(N,{type:"default",hideProgressBar:!0,icon:!1,position:l.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),r.value.total_amount=0,r.value.delivery_charge=0,r.value.coupon_discount=0,r.value.payable_amount=0,n.buyNowProduct=null,n.coupon_code="";let m=o.data.data.order_payment_url;if(m!=null){S(m);return}else n.showOrderConfirmModal=!0}).catch(o=>{d.error(o.response.data.message,{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),C.value=!1})):d.error("Please select at least one product",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"})},S=o=>{let m=700,p=700,P=screen.width/2-m/2,x=screen.height/2-p/2,Y="popup,resizable,height="+p+",width="+m+",top="+x+",left="+P,b=window.open(o,null,Y);b.title="Payment Window Screen - Make Payment",b.onload=()=>{b.title="Payment Window Screen - Make Payment"},b.focus();var j=setInterval(J,1e3);function J(){try{if(b.closed||!b){clearInterval(j),b.close(),n.orderPaymentCancelModal=!0,d.error("Payment Canceled",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),k.push({name:"home"});return}var L=b.location.pathname.replace(/\/order\/\d+/,"");if(L=="/payment/cancel"){clearInterval(j),setTimeout(()=>{b.close(),n.orderPaymentCancelModal=!0,d.error("Sorry! Payment Canceled",{position:l.langDirection==="rtl"?"bottom-right":"bottom-left"}),k.push({name:"home"})},8e3);return}if(L=="/payment/success"){b.close(),clearInterval(j),n.showOrderConfirmModal=!0;return}}catch{}}setTimeout(()=>{clearInterval(j),b.close()},18e4)};return(o,m)=>{var p,P;return i(),u("div",null,[e("div",me,[e("div",pe,t(o.$t("Order Summary")),1),e("div",he,[e("div",_e,t(o.$t("Subtotal")),1),e("div",ve,t(a(l).showCurrency(r.value.total_amount)),1)]),e("div",fe,[e("div",ye,t(o.$t("Discount")),1),e("div",be," -"+t(a(l).showCurrency(r.value.coupon_discount)),1)]),m[3]||(m[3]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",ge,[e("div",xe,t(o.$t("Subtotal After Discount")),1),e("div",we,t(a(l).showCurrency((r.value.total_amount-r.value.coupon_discount).toFixed(2))),1)]),e("div",$e,[e("div",ke,t(o.$t("Shipping Charge")),1),e("div",Ce,t(a(l).showCurrency(r.value.delivery_charge)),1)]),((p=r.value.all_vat_taxes)==null?void 0:p.length)>0||r.value.order_tax_amount>0?(i(),u("div",Pe,[e("h2",De,t(o.$t("VAT & Taxes Summary")),1),e("div",Ne,[(i(!0),u(G,null,H(r.value.all_vat_taxes,x=>(i(),u("div",{key:x.id,class:"flex justify-between bg-slate-200 p-2 rounded-lg"},[e("span",Me,[W(t(x.name)+" ",1),e("small",null,"("+t(x.percentage)+"%)",1)]),e("span",Se,t(a(l).showCurrency(x.amount)),1)]))),128))]),e("div",je,[e("h3",Be,t(o.$t("Total Tax Amount"))+": ",1),e("p",Ve,t(a(l).showCurrency(r.value.order_tax_amount)),1)])])):$("",!0),m[4]||(m[4]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",Ie,[e("div",Oe,t(o.$t("Total Payable")),1),e("div",Te,t(a(l).showCurrency(r.value.payable_amount)),1)]),e("div",Ae,[e("div",Ue,t(o.$t("Have a coupon"))+"? ",1),e("div",ze,[D(e("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=x=>s.value=x),class:T(["formInputCoupon pr-14 p-3",f.value?"text-green-500 pl-10":""]),placeholder:o.$t("Enter coupon code")},null,10,Ge),[[X,s.value]]),f.value?(i(),u("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:V},[y(a(de),{class:"w-6 h-6 text-red-500"})])):(i(),u("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:c},[y(a(Z),{class:"w-6 h-6 text-white"})])),e("span",He,[f.value?(i(),ee(a(te),{key:0,class:"w-6 h-6 text-green-500"})):$("",!0)])])])]),!((P=a(g).user)!=null&&P.account_verified)&&a(l).orderPlaceAccountVerify?(i(),u("div",Le,[e("span",We,t(o.$t("Please verify your account")),1),e("button",{class:"p-2 border border-primary rounded-md bg-primary-50 text-primary text-sm font-medium",onClick:m[1]||(m[1]=x=>h.value=!0)},t(o.$t("Verify Now")),1)])):$("",!0),C.value?(i(),u("button",Fe,[W(t(o.$t("Processing"))+" ",1),y(se)])):(i(),u("button",{key:1,class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:M},t(o.$t("Place Order")),1)),y(re),y(ie,{showModal:h.value,onHideModal:m[2]||(m[2]=x=>h.value=!1)},null,8,["showModal"])])}}},Ee=R(Re,[["__scopeId","data-v-d311d3cb"]]),qe={class:"space-y-4 mt-3 transition duration-300"},Xe={class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},Ye={key:0,class:"text-slate-950 text-base font-medium leading-normal"},Je={class:"space-y-2 divide-y divide-slate-200"},Ke={class:"w-[72px] h-[95px]"},Qe=["src"],Ze={class:"flex flex-col gap-1 w-full"},et={class:"text-primary text-xs font-normal leading-none"},tt={class:"text-slate-950 text-base font-normal leading-normal"},st={class:"flex flex-wrap justify-between items-center gap-3"},ot={class:"flex items-center gap-1"},at={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},nt={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},lt={class:"text-slate-800 text-base font-normal leading-normal"},rt={__name:"BuyNowCheckoutProduct",setup(B){z();const k=U(),n=A();return(l,g)=>{var d,f;return i(),u("div",qe,[e("div",Xe,[a(k).multiVendor?(i(),u("div",Ye,t((d=a(n).buyNowProduct)==null?void 0:d.shop_name),1)):$("",!0),e("div",Je,[(i(!0),u(G,null,H((f=a(n).buyNowProduct)==null?void 0:f.products,s=>{var h,v;return i(),u("div",{key:s.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",Ke,[e("img",{src:s.thumbnail,class:"w-full h-full object-contain"},null,8,Qe)]),e("div",Ze,[e("div",et,t(s==null?void 0:s.brand),1),e("div",tt,t(s==null?void 0:s.name),1),e("div",st,[e("div",ot,[e("div",at,t((h=s==null?void 0:s.size)==null?void 0:h.name),1),e("div",nt,t((v=s==null?void 0:s.color)==null?void 0:v.name),1)]),e("div",lt," 1 X "+t(a(k).showCurrency((s==null?void 0:s.discount_price)>0?s==null?void 0:s.discount_price:s==null?void 0:s.price)),1)])])])}),128))])])])}}},it={class:"main-container"},dt={class:"flex items-center gap-2 overflow-hidden pt-4"},ct={class:"grow w-full overflow-hidden"},ut={class:"space-x-1 text-slate-600 text-sm font-normal truncate"},mt={class:"grid grid-cols-1 xl:grid-cols-3 my-3 gap-8"},pt={class:"col-span-1 xl:col-span-2"},ht={class:"flex gap-2 justify-between items-center"},_t={class:"text-slate-950 text-lg sm:text-3xl font-medium leading-10"},vt={class:"text-primary-600 text-lg font-medium leading-normal tracking-tight"},ft={key:0},yt={class:"mt-6"},bt={class:"mb-1"},gt={class:"text-slate-950 text-xl font-medium leading-7"},xt={class:"text-slate-500 text-lg font-normal leading-7 tracking-tight"},wt=["placeholder"],$t={class:"p-6 mt-4 bg-white rounded-2xl border border-slate-200"},kt={class:"text-slate-950 text-xl font-medium leading-7"},Ct={class:"mt-4 flex flex-wrap gap-4"},Pt={key:0,for:"cash",class:"flex items-center gap-4 xl:min-w-80"},Dt=["checked"],Nt={class:"text-slate-500 text-base font-normal leading-normal"},Mt={key:1,for:"card",class:"flex items-center gap-4 xl:min-w-80"},St={class:"text-slate-500 text-base font-normal leading-normal"},jt={key:0,class:"mt-5 border-t border-slate-200"},Bt={class:"text-slate-600 pt-2 block text-md font-medium leading-7"},Vt={class:"mt-3 flex flex-wrap gap-4"},It=["for"],Ot=["id","value"],Tt={class:""},At=["src"],Ut={__name:"BuyNow",setup(B){const k=new E,n=z(),l=U(),g=A(),d=w(!0),f=w(""),s=l.cashOnDelivery?"cash":"card",h=w(s),v=w(null),r=w(null);return q(()=>{window.scrollTo(0,0),g.coupon_code="",v.value=h.value,n.user||k.push({name:"home"})}),O(h,()=>{h.value==="card"?v.value=r.value:v.value=h.value}),O(r,()=>{h.value==="card"&&(v.value=r.value)}),(_,c)=>{var N,C,M,S,o,m;const V=ae("router-link");return i(),u("div",it,[e("div",dt,[y(V,{to:"/",class:"w-6 h-6"},{default:F(()=>[y(a(ue),{class:"w-5 h-5 text-slate-600"})]),_:1}),e("div",ct,[e("div",ut,[e("span",null,t(_.$t("Home")),1),c[5]||(c[5]=e("span",null,"/",-1)),e("span",null,t(_.$t("Cart")),1),c[6]||(c[6]=e("span",null,"/",-1)),e("span",null,t(_.$t("Checkout")),1)])])]),e("div",mt,[e("div",pt,[e("div",{class:T(["py-4 border-b tran",d.value?"border-primary":"border-slate-200"])},[e("div",ht,[e("div",_t,t(_.$t("Checkout")),1),e("div",{class:"flex items-center gap-2 cursor-pointer",onClick:c[0]||(c[0]=p=>d.value=!d.value)},[e("div",vt," ("+t(a(g).buyNowProduct?1:0)+" "+t(_.$t("items"))+") ",1),y(a(ne),{class:T(["w-5 h-5 text-primary-600 transition duration-300",d.value?"rotate-180":""])},null,8,["class"])])]),d.value?(i(),u("div",ft,[y(rt)])):$("",!0)],2),y(ce),e("div",yt,[e("div",bt,[e("span",gt,t(_.$t("Note")),1),e("span",xt," ("+t(_.$t("Optional"))+") ",1)]),D(e("textarea",{"onUpdate:modelValue":c[1]||(c[1]=p=>f.value=p),rows:"3",class:"form-input",placeholder:_.$t("Write your note here")+"..."},null,8,wt),[[X,f.value]])]),e("div",$t,[e("div",kt,t(_.$t("Payment Method")),1),e("div",Ct,[a(l).cashOnDelivery&&((C=(N=a(g).buyNowProduct)==null?void 0:N.products[0])==null?void 0:C.is_digital)!=!0?(i(),u("label",Pt,[D(e("input",{"onUpdate:modelValue":c[2]||(c[2]=p=>h.value=p),id:"cash",name:"payment",type:"radio",class:"radioBtn2",value:"cash",checked:((S=(M=a(g).buyNowProduct)==null?void 0:M.products[0])==null?void 0:S.is_digital)==!1},null,8,Dt),[[I,h.value]]),c[7]||(c[7]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/money-2.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",Nt,t(_.$t("Cash on delivery")),1)])):$("",!0),a(l).onlinePayment?(i(),u("label",Mt,[D(e("input",{"onUpdate:modelValue":c[3]||(c[3]=p=>h.value=p),id:"card",name:"payment",type:"radio",class:"radioBtn2",value:"card"},null,512),[[I,h.value]]),c[8]||(c[8]=e("div",{class:"p-2 bg-white rounded-xl border border-slate-200"},[e("img",{src:"assets/icons/card.svg",alt:"",class:"w-7 h-7"})],-1)),e("span",St,t(_.$t("Credit or Debit Card")),1)])):$("",!0)]),y(le,{"leave-active-class":"transition ease-in duration-300","enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:F(()=>[h.value==="card"?(i(),u("div",jt,[e("span",Bt,t(_.$t("Available Payment Gateways")),1),e("div",Vt,[(i(!0),u(G,null,H(a(l).paymentGateways,p=>(i(),u("label",{key:p.id,for:p.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer"},[D(e("input",{"onUpdate:modelValue":c[4]||(c[4]=P=>r.value=P),id:p.name,name:"paymentGateway",type:"radio",class:"sr-only",value:p.name},null,8,Ot),[[I,r.value]]),e("div",Tt,[e("img",{src:p.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,At)])],8,It))),128))])])):$("",!0)]),_:1})])]),y(Ee,{note:f.value,paymentMethod:v.value,isDigitalProduct:(m=(o=a(g).buyNowProduct)==null?void 0:o.products[0])==null?void 0:m.is_digital},null,8,["note","paymentMethod","isDigitalProduct"])])])}}},qt=R(Ut,[["__scopeId","data-v-f0abd7ee"]]);export{qt as default};
