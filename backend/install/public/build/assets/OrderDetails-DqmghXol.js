import{c as n,o as l,a as e,G as ae,n as B,d as $,t,_ as oe,q as H,b as r,B as ne,F as z,H as Z,u as G,v as le,p as L,w as _,g as o,a4 as E,a5 as R,a6 as Y,l as O,C as N,a0 as F,r as V,h as A,ab as X,a9 as W,a1 as J,a7 as Q,I as re,s as ee,D as ie,x as de,z as me,y as ue,j as ce,e as K}from"./app-BuJg5W9A.js";import{u as pe,N as fe,_ as he}from"./OrderDetailsPageHeader-BOn_Liv0.js";import{_ as ve}from"./OrderConfirmModal-P_yQJd6l.js";import{r as ge}from"./ExclamationTriangleIcon-CFvvcnti.js";import{r as xe}from"./ArrowDownTrayIcon-DV_-nZla.js";import{r as ye}from"./HomeIcon-DOllKTN_.js";function be(a,b){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M15.988 3.012A2.25 2.25 0 0 1 18 5.25v6.5A2.25 2.25 0 0 1 15.75 14H13.5V7A2.5 2.5 0 0 0 11 4.5H8.128a2.252 2.252 0 0 1 1.884-1.488A2.25 2.25 0 0 1 12.25 1h1.5a2.25 2.25 0 0 1 2.238 2.012ZM11.5 3.25a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v.25h-3v-.25Z","clip-rule":"evenodd"}),e("path",{"fill-rule":"evenodd",d:"M2 7a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7Zm2 3.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Zm0 3.5a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Z","clip-rule":"evenodd"})])}function _e(a,b){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{d:"M3.75 3A1.75 1.75 0 0 0 2 4.75v3.26a3.235 3.235 0 0 1 1.75-.51h12.5c.644 0 1.245.188 1.75.51V6.75A1.75 1.75 0 0 0 16.25 5h-4.836a.25.25 0 0 1-.177-.073L9.823 3.513A1.75 1.75 0 0 0 8.586 3H3.75ZM3.75 9A1.75 1.75 0 0 0 2 10.75v4.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0 0 18 15.25v-4.5A1.75 1.75 0 0 0 16.25 9H3.75Z"})])}function we(a,b){return l(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const $e={class:"p-4 lg:p-6 bg-white rounded-xl flex flex-col"},ke={class:"flex gap-1 justify-between items-center"},Ce={class:"text-sm sm:text-base font-normal shrink-0"},Pe={class:"text-slate-500"},je={class:"text-blue-500"},Oe={class:"flex flex-col items-end gap-3"},De={class:"flex items-center gap-1 sm:gap-3 mt-1 sm:mt-0 flex-wrap"},Se={class:"inline-flex gap-2 text-sm md:text-base leading-tight text-ellipsis"},Ae={class:"text-slate-500 shrink-0"},Me={class:"text-slate-950 whitespace-nowrap text-ellipsis overflow-hidden"},ze={class:"flex gap-2"},Ie={class:"text-slate-500 text-sm md:text-base font-normal leading-normal"},Re={class:"text-slate-950 text-sm md:text-base font-normal leading-normal"},Ve={__name:"OrderDetailsOrderStatus",props:{order:Object},setup(a){const b=B(),m=$(!1),S=async i=>{await axios.post("/store-message",{shop_id:i,user_id:b.user.id,type:"user"},{headers:{Authorization:b.token}}),m.value=!0};return(i,h)=>{var c;return l(),n(z,null,[e("div",$e,[e("div",ke,[e("div",Ce,[e("span",Pe,t(i.$t("Order ID")),1),e("span",je,t(a.order.order_code),1)]),e("div",Oe,[e("div",{onClick:h[0]||(h[0]=f=>{var g;return S((g=a.order.shop)==null?void 0:g.id)}),class:"w-8 h-8 flex justify-center items-center bg-red-50 rounded-lg cursor-pointer"},[...h[2]||(h[2]=[e("img",{src:oe,alt:"chat",class:"w-6 h-6"},null,-1)])]),e("div",{class:H(["text-xs sm:text-sm font-normal px-2 py-1 rounded-[10px] inline-block text-ellipsis overflow-hidden",a.order.order_status])},t(a.order.order_status),3)])]),e("div",De,[e("div",Se,[e("span",Ae,t(i.$t("Placed on")),1),e("span",Me,t(a.order.placed_at),1)]),h[3]||(h[3]=e("div",{class:"w-2 h-2 bg-slate-300 rounded-full hidden sm:block"},null,-1)),e("div",ze,[e("div",Ie,t(i.$t("Esd. delivery")),1),e("div",Re,t(a.order.estimated_delivery_date),1)])])]),e("div",null,[r(ne,{show:m.value,onClose:h[1]||(h[1]=f=>m.value=!1),shop:(c=a.order)==null?void 0:c.shop},null,8,["show","shop"])])],64)}}},Be=ae(Ve,[["__scopeId","data-v-59021abb"]]),Te={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Ue={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},He={class:"bg-white p-5 sm:p-8 text-center"},Le={class:"text-slate-600 py-2 block text-md font-medium border-b"},Ne={class:"mt-3 flex flex-wrap gap-4 items-center justify-center"},Ze={key:0,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer grow max-w-40",title:"Cash on delivery"},Ge={class:"flex items-center"},Ee={class:"text-slate-600 text-xl overflow-hidden whitespace-nowrap text-ellipsis"},Ye=["for"],We=["id","value"],qe={class:""},Fe=["src"],Xe={class:"mt-5 w-full grow flex justify-end border-t pt-2"},Je={key:0},Ke={key:1,type:"button",class:"px-4 py-3 md:py-4 bg-primary-300 rounded-lg text-primary text-base font-medium flex items-center gap-1",disabled:""},Qe={key:1},et={key:1,type:"button",class:"px-4 py-3 md:py-4 bg-primary-300 rounded-lg text-primary text-base font-medium flex items-center gap-1",disabled:""},tt={__name:"OrderDetailsPaymentAndAgainOrder",props:{order:Object,againOrder:Boolean,makePayment:Boolean},emits:["update:makePayment","update:orderAgain","update:paymentSuccess"],setup(a,{emit:b}){const m=Z(),S=B(),i=G(),h=le(),c=a,f=$(!1),g=$(null),P=$(!1),x=$(!1),k=$(!1),D=b;L(()=>c.makePayment,()=>{c.makePayment===!0&&(f.value=!0)}),L(()=>c.againOrder,()=>{c.againOrder===!0&&(f.value=!0)}),L(()=>f.value,()=>{f.value===!1&&(D("update:makePayment",!1),D("update:orderAgain",!1))});const M=()=>{if(g.value==null){m.error("Please select payment method",{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"});return}x.value=!0,axios.get("/order-payment/"+c.order.id+"/"+g.value,{headers:{Authorization:S.token}}).then(s=>{s.data.data.order_payment_url&&(D("update:makePayment",!1),f.value=!1,x.value=!1,k.value=!0,y(s.data.data.order_payment_url))}).catch(s=>{x.value=!1,m.error(s.response.data.message,{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"})})},d={component:J,props:{title:"Order Placed",message:"Your order has been placed successfully."}},p=()=>{if(g.value==null){m.error("Please select payment method",{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"});return}P.value=!0,axios.post("/place-order/again",{order_id:c.order.id,payment_method:g.value},{headers:{Authorization:S.token}}).then(s=>{D("update:orderAgain",!1),D("update:makePayment",!1),P.value=!1,f.value=!1,m(d,{type:"default",hideProgressBar:!0,icon:!1,position:i.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3});const u=s.data.data.order_payment_url;u&&y(u)}).catch(s=>{P.value=!1,f.value=!1,m.error(s.response.data.message,{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"})})},v={component:J,props:{title:"Payment Success!",message:"Your payment has been successfully completed."}},y=s=>{let u=700,j=700,I=screen.width/2-u/2,T=screen.height/2-j/2,U="popup,resizable,height="+j+",width="+u+",top="+T+",left="+I;var C=window.open(s,null,U);if(C.title="Payment Window Screen - Make Payment",C.onload=()=>{C.title="Payment Window Screen - Make Payment"},C.focus(),C.closed){m.error("Payment Canceled",{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"}),k.value=!1,router.push("/order-history");return}var w=setInterval(te,1e3);function te(){try{if(C.closed||!C){clearInterval(w),C.close(),h.orderPaymentCancelModal=!0,m.error("Payment Canceled",{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"}),k.value=!1,router.push("/order-history");return}var q=C.location.pathname.replace(/\/order\/\d+/,"");if(q=="/payment/cancel"){clearInterval(w),k.value=!1,setTimeout(()=>{C.close(),h.orderPaymentCancelModal=!0,m.error("Payment Canceled",{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"}),router.push("/order-history")},8e3);return}if(q=="/payment/success"){if(C.close(),clearInterval(w),m(v,{type:"default",hideProgressBar:!0,icon:!1,position:i.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),k.value){k.value=!1,D("update:paymentSuccess",!0);return}router.push("/order-history");return}}catch{}}setTimeout(()=>{clearInterval(w),C.close(),k.value=!1,router.push("/order-history")},18e4)};return(s,u)=>(l(),n("div",null,[r(o(W),{as:"template",show:f.value},{default:_(()=>[r(o(E),{as:"div",class:"relative z-10",onClose:u[2]||(u[2]=j=>f.value=!1)},{default:_(()=>[r(o(R),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:_(()=>[...u[3]||(u[3]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])]),_:1}),e("div",Te,[e("div",Ue,[r(o(R),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:_(()=>[r(o(Y),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-xl"},{default:_(()=>[e("div",He,[e("span",Le,t(s.$t("Available Payment Gateways")),1),e("div",Ne,[a.againOrder&&o(i).cashOnDelivery?(l(),n("label",Ze,[N(e("input",{"onUpdate:modelValue":u[0]||(u[0]=j=>g.value=j),id:"cash",name:"paymentGateway",type:"radio",class:"sr-only",value:"cash"},null,512),[[F,g.value]]),e("div",Ge,[u[4]||(u[4]=e("img",{src:"/assets/icons/money-2.svg",alt:"",class:"w-12 h-16 object-contain"},null,-1)),e("span",Ee,t(s.$t("Cash On Delivery")),1)])])):O("",!0),o(i).onlinePayment?(l(!0),n(z,{key:1},V(o(i).paymentGateways,j=>(l(),n("label",{key:j.id,for:j.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer grow max-w-40"},[N(e("input",{"onUpdate:modelValue":u[1]||(u[1]=I=>g.value=I),id:j.name,name:"paymentGateway",type:"radio",class:"sr-only",value:j.name},null,8,We),[[F,g.value]]),e("div",qe,[e("img",{src:j.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,Fe)])],8,Ye))),128)):O("",!0)]),e("div",Xe,[c.makePayment?(l(),n("div",Je,[x.value?(l(),n("button",Ke,[r(X),A(" "+t(s.$t("Processing"))+"... ",1)])):(l(),n("button",{key:0,class:"px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium",onClick:M},t(s.$t("Confirm Payment")),1))])):O("",!0),c.againOrder?(l(),n("div",Qe,[P.value?(l(),n("button",et,[r(X),A(" "+t(s.$t("Processing"))+"... ",1)])):(l(),n("button",{key:0,class:"px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium",onClick:p},t(s.$t("Make Order Payment")),1))])):O("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),r(ve)]))}},st={class:"bg-white rounded-lg md:rounded-2xl border border-slate-100 p-3 md:p-4 xl:p-6"},at={class:"flex justify-between items-center"},ot={class:"text-slate-950 text-lg md:text-xl font-medium my-2"},nt={class:"text-slate-950 text-lg md:text-xl font-medium my-2"},lt={class:"my-3 flex justify-between gap-4"},rt={class:"text-slate-950 text-sm sm:text-base font-normal"},it={class:"text-slate-950 text-sm sm:text-base font-normal"},dt={class:"my-3 flex justify-between gap-4"},mt={class:"text-slate-950 text-sm sm:text-base font-normal"},ut={class:"text-slate-950 text-sm sm:text-base font-normal"},ct={class:"my-3 flex justify-between gap-4"},pt={class:"text-red-500 text-sm sm:text-base font-normal"},ft={class:"text-slate-950 text-sm sm:text-base font-normal"},ht={class:"my-3 flex justify-between gap-4"},vt={class:"text-slate-950 text-sm sm:text-base font-normal"},gt={class:"text-slate-950 text-sm sm:text-base font-normal"},xt={key:0,class:"p-3 bg-slate-100 text-black rounded-lg mb-2"},yt={class:"text-sm sm:text-base font-medium mb-2"},bt={class:"space-y-2"},_t={class:"font-medium"},wt={class:"font-medium"},$t={class:"mt-2 p-3 flex justify-between bg-slate-200 rounded-lg"},kt={class:"text-sm sm:text-base font-medium"},Ct={class:"text-base font-bold"},Pt={class:"my-3 flex justify-between gap-4"},jt={class:"text-slate-950 text-sm sm:text-base font-normal"},Ot={class:"text-slate-950 text-base sm:text-lg tracking-tight"},Dt={class:"bg-slate-50 rounded md:rounded-lg border border-slate-100 p-2 lg:p-4 mt-2 flex flex-col gap-1 lg:gap-2"},St={class:"text-slate-500 text-sm font-normal leading-tight"},At={class:"text-slate-950 text-sm md:text-lg font-medium leading-tight flex items-center justify-between flex-wrap"},Mt={key:0,class:"text-red-500 text-sm font-normal bg-red-100 p-1 rounded-md flex gap-1 items-center"},zt={key:1,class:"bg-emerald-500 text-sm font-normal text-white p-1 rounded-md flex items-center"},It={class:"flex flex-wrap gap-2 mt-2 items-center justify-center"},Rt={class:"text-center text-primary text-xs md:text-sm font-normal underline leading-tight"},Vt={class:"text-center text-primary text-xs md:text-sm font-normal underline leading-tight"},Bt={class:"flex items-center gap-2"},Tt={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Ut={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},Ht={class:"bg-white p-5 sm:p-8 text-center"},Lt={class:"bg-red-500 w-14 h-14 md:w-20 md:h-20 rounded-full mx-auto flex justify-center items-center"},Nt={class:"mt-3 text-center text-gray-900 text-2xl md:text-3xl font-bold"},Zt={class:"mt-4 text-center text-slate-700 text-base md:text-xl font-normal"},Gt={class:"flex justify-between items-center gap-4 mt-8"},Et={__name:"OrderDetailsSummery",props:{order:Object},emits:["update:paymentSuccess"],setup(a,{emit:b}){const m=G(),S=Z(),i=B(),h=$(!1),c=$(!1),f=$(!1);$(!1);const g=b,P=()=>{g("update:paymentSuccess",!0)},x=a,k=()=>{axios.post("/orders/cancel",{order_id:x.order.id},{headers:{Authorization:i.token}}).then(d=>{S.success(d.data.message,{position:m.langDirection==="rtl"?"bottom-right":"bottom-left"}),i.orderCancel=!0}),h.value=!1},D=()=>{x.order.invoice_url?window.open(x.order.invoice_url,"_blank"):S.error("Invoice not found",{position:m.langDirection==="rtl"?"bottom-right":"bottom-left"})},M=()=>{var d;(d=x.order)!=null&&d.payment_receipt_url?window.open(x.order.payment_receipt_url,"_blank"):S.error("Payment Slip not found",{position:m.langDirection==="rtl"?"bottom-right":"bottom-left"})};return(d,p)=>{var v,y,s,u,j,I,T,U,C;return l(),n("div",null,[e("div",st,[e("div",at,[e("div",ot,t(d.$t("Order Id")),1),e("p",null,t(a.order.order_code),1)]),p[9]||(p[9]=e("div",{class:"w-full h-[0px] border border-slate-400"},null,-1)),e("div",nt,t(d.$t("Order Summary")),1),e("div",lt,[e("div",rt,t(d.$t("Items")),1),e("div",it,t(a.order.quantity),1)]),e("div",dt,[e("div",mt,t(d.$t("Subtotal")),1),e("div",ut,t(o(m).showCurrency((v=a.order)==null?void 0:v.total_amount)),1)]),e("div",ct,[e("div",pt,t(d.$t("Discount")),1),e("div",ft," -"+t(o(m).showCurrency((y=a.order)==null?void 0:y.coupon_discount)),1)]),e("div",ht,[e("div",vt,t(d.$t("Shipping Charge")),1),e("div",gt,t(o(m).showCurrency((s=a.order)==null?void 0:s.delivery_charge)),1)]),((u=a.order.all_vat_taxes)==null?void 0:u.length)>0||((j=a.order)==null?void 0:j.tax_amount)>0?(l(),n("div",xt,[e("h2",yt,t(d.$t("VAT & Taxes Summary")),1),e("div",bt,[(l(!0),n(z,null,V(a.order.all_vat_taxes,w=>(l(),n("div",{key:w.id,class:"flex justify-between bg-slate-200 p-2 rounded-lg"},[e("span",_t,[A(t(w.name)+" ",1),e("small",null,"("+t(w.percentage)+"%)",1)]),e("span",wt,t(o(m).showCurrency(w.amount)),1)]))),128))]),e("div",$t,[e("h3",kt,t(d.$t("Total Tax Amount"))+": ",1),e("p",Ct,t(o(m).showCurrency((I=a.order)==null?void 0:I.tax_amount)),1)])])):O("",!0),p[10]||(p[10]=e("div",{class:"w-full h-[0px] border border-slate-400"},null,-1)),e("div",Pt,[e("div",jt,t(d.$t("Total Amount")),1),e("div",Ot,t(o(m).showCurrency((T=a.order)==null?void 0:T.payable_amount)),1)]),e("div",Dt,[e("div",St,t(d.$t("PAYMENT METHOD")),1),e("div",At,[A(t(a.order.payment_method)+" ",1),a.order.payment_status==="Pending"?(l(),n("span",Mt,[r(o(ge),{class:"w-5 h-5"}),A(" "+t(a.order.payment_status),1)])):O("",!0),a.order.payment_status==="Paid"?(l(),n("span",zt,[r(o(we),{class:"w-5 h-5"}),A(" "+t(a.order.payment_status),1)])):O("",!0)])]),e("div",It,[e("button",{class:"p-2 flex gap-1 lg:gap-2 items-center justify-center",onClick:M},[p[7]||(p[7]=e("img",{src:"/assets/icons/cloud.svg",alt:"download",class:"w-4 h-4 md:w-6 md:h-6"},null,-1)),e("span",Rt,t(d.$t("Payment Slip")),1)]),e("button",{class:"p-2 flex gap-1 lg:gap-2 items-center justify-center",onClick:D},[p[8]||(p[8]=e("img",{src:"/assets/icons/cloud.svg",alt:"download",class:"w-4 h-4 md:w-6 md:h-6"},null,-1)),e("span",Vt,t(d.$t("Download Invoice")),1)])])]),e("div",Bt,[a.order.order_status==="Pending"?(l(),n("button",{key:0,class:"mt-5 px-4 py-3 md:py-4 bg-white rounded-lg text-slate-700 text-base font-medium grow",onClick:p[0]||(p[0]=w=>h.value=!0)},t(d.$t("Cancel Order")),1)):O("",!0),((U=x.order)==null?void 0:U.payment_status)=="Pending"&&((C=x.order)==null?void 0:C.payment_method)=="Online Payment"?(l(),n("button",{key:1,class:"mt-5 px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium grow",onClick:p[1]||(p[1]=w=>f.value=!0)},t(d.$t("Make Payment")),1)):O("",!0)]),a.order.order_status==="Delivered"?(l(),n("button",{key:0,class:"w-full mt-5 px-6 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium",onClick:p[2]||(p[2]=w=>c.value=!0)},t(d.$t("Order Again")),1)):O("",!0),r(o(W),{as:"template",show:h.value},{default:_(()=>[r(o(E),{as:"div",class:"relative z-10",onClose:p[4]||(p[4]=w=>h.value=!1)},{default:_(()=>[r(o(R),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:_(()=>[...p[11]||(p[11]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])]),_:1}),e("div",Tt,[e("div",Ut,[r(o(R),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:_(()=>[r(o(Y),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:_(()=>[e("div",Ht,[e("div",Lt,[r(o(Q),{class:"w-8 h-8 md:w-12 md:h-12 text-white"})]),e("div",Nt,t(d.$t("Cancel the Order"))+"! ",1),e("div",Zt,t(d.$t("Are you sure want to cancel this order"))+"? ",1),e("div",Gt,[e("button",{class:"text-slate-800 grow text-base font-medium px-4 py-3 md:px-6 md:py-4 rounded-lg md:rounded-[10px] border border-slate-300",onClick:p[3]||(p[3]=w=>h.value=!1)},t(d.$t("Cancel")),1),e("button",{class:"text-white grow bg-red-500 text-base font-medium px-4 py-3 md:px-6 md:py-4 rounded-lg md:rounded-[10px]",onClick:k},t(d.$t("Yes")),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),r(tt,{order:a.order,makePayment:f.value,againOrder:c.value,"onUpdate:makePayment":p[5]||(p[5]=w=>f.value=!1),"onUpdate:orderAgain":p[6]||(p[6]=w=>c.value=!1),"onUpdate:paymentSuccess":P},null,8,["order","makePayment","againOrder"])])}}},Yt={class:"space-y-2 divide-y divide-slate-200"},Wt={class:"w-[72px] h-[72px]"},qt=["src"],Ft={class:"flex flex-col gap-1 w-full relative"},Xt={class:"text-primary text-xs font-normal leading-none"},Jt={class:"flex justify-between items-center gap-2 mb-3"},Kt={class:"text-slate-950 text-base font-normal leading-normal"},Qt={class:"flex gap-2"},es=["onClick"],ts={key:1,class:"flex items-center gap-0"},ss={key:0},as={class:"relative"},os=["onClick"],ns={class:"flex flex-wrap justify-start items-center gap-1"},ls={key:0,class:"absolute right-0 z-10 mt-1 w-32 bg-white border border-red-400 rounded-lg shadow-lg"},rs={class:"p-2 text-[10px] text-slate-700"},is=["href"],ds=["href"],ms={key:0,class:"flex items-center gap-1"},us={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},cs={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},ps={class:"text-slate-800 text-base font-normal leading-normal"},fs={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},hs={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},vs={class:"bg-white p-5 sm:p-8 relative"},gs={class:"text-xl font-semibold text-gray-800 mb-4"},xs={class:"flex justify-center items-center gap-3 mb-4"},ys={class:"text-gray-600 text-lg"},bs={for:"description"},_s=["placeholder"],ws={class:"flex justify-end space-x-3 mt-4"},$s={__name:"OrderProducts",props:{order:Object,default:()=>{}},emits:["refresh"],setup(a,{emit:b}){const m=Z(),S=B(),{truncate:i}=pe(),h=a,c=b,f=G(),g=$(0),P=$(""),x=$(!1),k=$(""),D=v=>{k.value=v,g.value=0,P.value="",x.value=!0},M=()=>{if(g.value==0)return m.error("Please select rating",{position:f.langDirection==="rtl"?"bottom-right":"bottom-left"}),!1;if(P.value=="")return m.error("Please enter message",{position:f.langDirection==="rtl"?"bottom-right":"bottom-left"}),!1;de.post("/product-review",{rating:g.value,description:P.value,order_id:h.order.id,product_id:k.value},{headers:{Authorization:`${S.token}`}}).then(v=>{m.success(v.data.message,{position:f.langDirection==="rtl"?"bottom-right":"bottom-left"}),x.value=!1,c("refresh")}).catch(v=>{m.error(v.response.data.message,{position:f.langDirection==="rtl"?"bottom-right":"bottom-left"})})},d=$(null);function p(v){d.value=d.value==v?null:v}return(v,y)=>(l(),n(z,null,[e("div",Yt,[(l(!0),n(z,null,V(a.order.products,s=>(l(),n("div",{key:s.id,class:"flex gap-4 justify-start w-full items-center pt-2"},[e("div",Wt,[e("img",{src:s.thumbnail,class:"w-full h-full object-contain rounded-lg"},null,8,qt)]),e("div",Ft,[e("div",Xt,t(s.brand),1),e("div",Jt,[e("div",Kt,t(o(i)(s.name,50)),1),e("div",Qt,[N(e("div",null,[s.rating?(l(),n("div",ts,[(l(),n(z,null,V(5,u=>e("span",{key:u},[r(o(ee),{class:H(["w-5 h-5",u<=s.rating?"text-amber-500":"text-slate-200"])},null,8,["class"])])),64))])):(l(),n("button",{key:0,class:"px-4 py-1 w-full sm:w-20 bg-amber-50 border border-amber-400 text-amber-500 rounded-md md:rounded-lg text-xs font-normal",onClick:u=>D(s.id)},t(v.$t("Review")),9,es))],512),[[re,a.order.order_status==="Delivered"]]),s.is_digital==!0&&a.order.payment_status==="Paid"?(l(),n("div",ss,[e("div",as,[e("button",{type:"button",class:"flex items-center justify-between w-full sm:w-24 px-2 py-1 bg-red-50 border border-red-400 rounded-lg text-red-500 text-[10px] font-medium hover:bg-white hover:text-red-500 transition",onClick:u=>p(s.id)},[e("span",ns,[r(o(xe),{class:"w-3 h-3"}),A(" "+t(v.$t("Download")),1)]),(l(),n("svg",{class:H(["w-3 h-3 ml-1 transition-transform duration-300",d.value==s.id?"rotate-180":""]),fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[...y[6]||(y[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,os),d.value==s.id?(l(),n("div",ls,[e("ul",rs,[(l(!0),n(z,null,V(s.attachments,u=>(l(),n("li",null,[e("a",{href:u.url,download:"",class:"flex items-center justify-start gap-1 py-2 px-2 hover:bg-red-100 transition rounded-t-lg uppercase"},[r(o(_e),{class:"w-3 h-3"}),A(" "+t(u.extension),1)],8,is)]))),256)),e("li",null,[e("a",{href:`${o(f).baseUrl}/api/download-product-license/${s.licenses.map(u=>u.id).join(",")}`,class:"flex items-center justify-start gap-1 py-2 px-2 hover:bg-red-100 transition rounded-b-lg"},[r(o(be),{class:"w-3 h-3"}),A(" "+t(v.$t("License")),1)],8,ds)])])])):O("",!0)])])):O("",!0)])]),e("div",{class:H(["flex flex-wrap items-center gap-3",s.is_digital!=!0?"justify-between":"justify-end"])},[s.is_digital!=!0?(l(),n("div",ms,[e("div",us,t(s.size),1),e("div",cs,t(s.color),1)])):O("",!0),e("div",ps,t(s.order_qty)+" X "+t(o(f).showCurrency(s.discount_price>0?s.discount_price:s.price)),1)],2)])]))),128))]),r(o(W),{as:"template",show:x.value},{default:_(()=>[r(o(E),{as:"div",class:"relative z-10",onClose:y[5]||(y[5]=s=>x.value=!1)},{default:_(()=>[r(o(R),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:_(()=>[...y[7]||(y[7]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-50 transition-opacity"},null,-1)])]),_:1}),e("div",fs,[e("div",hs,[r(o(R),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:_(()=>[r(o(Y),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all my-8 md:my-0 w-full sm:max-w-lg md:max-w-xl"},{default:_(()=>[e("div",vs,[e("div",{class:"w-9 h-9 bg-slate-100 rounded-[32px] absolute top-4 right-4 flex justify-center items-center cursor-pointer",onClick:y[0]||(y[0]=s=>x.value=!1)},[r(o(Q),{class:"w-6 h-6 text-slate-600"})]),e("h2",gs,t(v.$t("Rate Your Experience")),1),e("div",xs,[r(o(fe),{modelValue:g.value,"onUpdate:modelValue":y[1]||(y[1]=s=>g.value=s),"star-size":42,inactiveColor:"#cbd5e1"},null,8,["modelValue"]),e("div",ys,[e("span",null,t(v.$t("Rating"))+":",1),A(" "+t(g.value),1)])]),e("div",null,[e("label",bs,t(v.$t("Message")),1),N(e("textarea",{"onUpdate:modelValue":y[2]||(y[2]=s=>P.value=s),class:"border border-gray-300 p-2 w-full rounded focus:border-primary outline-none",rows:"4",placeholder:v.$t("Enter your description")},null,8,_s),[[ie,P.value]])]),e("div",ws,[e("button",{class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3.5 px-4 rounded-lg focus:outline-none flex-grow",onClick:y[3]||(y[3]=s=>x.value=!1)},t(v.$t("Cancel")),1),e("button",{class:"bg-primary hover:bg-primary-600 text-white font-semibold py-3.5 px-4 rounded-lg focus:outline-none flex-grow",onClick:y[4]||(y[4]=s=>M())},t(v.$t("Submit")),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}},ks={class:"bg-white px-3 text-slate-600 flex items-center gap-1 pt-2"},Cs={class:"leading-normal"},Ps={key:0,class:"h-10 px-5 py-1 rounded outline outline-1 outline-offset-[-1px] outline-primary inline-flex justify-start items-center gap-2 text-primary text-base font-medium leading-normal transition-all duration-200 hover:bg-primary hover:text-white"},js={class:"px-2 pt-2 md:px-4 md:pt-4 lg:px-6 lg:pt-8"},Os={class:"grid grid-cols-3 gap-4 md:gap-6 p-3 md:p-4 xl:p-8 bg-white rounded-lg md:rounded-2xl"},Ds={class:"col-span-3 lg:col-span-2 bg-white"},Ss={class:"rounded-xl md:rounded-2xl outline outline-1 outline-offset-[-1px] outline-slate-100 p-3 md:p-4 xl:p-6"},As={class:"text-slate-500 text-xs md:text-sm font-normal leading-tight md:leading-none"},Ms={class:"flex items-center gap-4 mt-2"},zs=["src"],Is={class:"flex flex-wrap gap-2 justify-between items-start grow"},Rs={class:"text-slate-950 text-sm md:text-base font-medium leading-tight md:leading-normal"},Vs={class:"flex items-center gap-1"},Bs={class:"text-slate-800 text-xs md:text-sm font-medium leading-tight"},Ts={class:"text-slate-600 text-sm font-normal leading-tight"},Us={class:"col-span-3 lg:col-span-1"},Ys={__name:"OrderDetails",setup(a){const b=B(),m=me(),S=ue(),i=$({});L(()=>b.orderCancel,()=>{b.orderCancel==!0&&h(),b.orderCancel=!1}),ce(()=>{h(),window.scrollTo(0,0,{behavior:"smooth"})});const h=async()=>{axios.get("/order-details",{params:{order_id:m.params.id},headers:{Authorization:b.token}}).then(c=>{i.value=c.data.data.order}).catch(c=>{c.response.status===401&&(b.token=null,b.user=null,b.addresses=[],b.favoriteProducts=0,S.push("/"))})};return(c,f)=>{var x,k,D,M;const g=K("router-link"),P=K("RouterLink");return l(),n("div",null,[e("div",ks,[r(o(ye),{class:"w-5 h-5 md:w-6 md:h-6"}),r(g,{to:"/order-history",class:"leading-normal hover:text-primary"},{default:_(()=>[A(t(c.$t("Order History")),1)]),_:1}),e("span",Cs,"/ "+t(c.$t("Order Details")),1)]),r(he,{title:c.$t("Order Details")},{default:_(()=>[r(P,{to:"/return-product/"+i.value.id},{default:_(()=>[i.value.is_returnable?(l(),n("button",Ps,t(c.$t("Return Product")),1)):O("",!0)]),_:1},8,["to"])]),_:1},8,["title"]),e("div",js,[r(Be,{order:i.value},null,8,["order"]),e("div",Os,[e("div",Ds,[e("div",Ss,[e("div",As,t(c.$t("Purchased from")),1),e("div",Ms,[e("img",{class:"w-9 h-9 md:w-12 md:h-12",src:(x=i.value.shop)==null?void 0:x.logo},null,8,zs),e("div",Is,[e("div",null,[e("div",Rs,t((k=i.value.shop)==null?void 0:k.name),1),e("div",Vs,[r(o(ee),{class:"w-5 h-5 text-yellow-400"}),e("span",Bs,t((D=i.value.shop)==null?void 0:D.rating),1)])])])]),f[0]||(f[0]=e("div",{class:"w-full h-[0px] border-t border-slate-200 my-4"},null,-1)),e("div",Ts,t(c.$t("Products"))+" ("+t((M=i.value.products)==null?void 0:M.length)+") ",1),r($s,{order:i.value,onRefresh:h},null,8,["order"])])]),e("div",Us,[r(Et,{order:i.value,"onUpdate:paymentSuccess":h},null,8,["order"])])])])])}}};export{Ys as default};
